function file(e,t){var n=getHttpRequest();return n.open("POST",e,!1),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(t),4==n.readyState?n.responseText:!1}function fileXML(e,t){e=e+"?"+t;var n=getHttpRequest();return n.open("GET",e,!1),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(null),4==n.readyState?n.responseXML:!1}function fileasynch(e,t,n){var o=getHttpRequest();o.onreadystatechange=function(){4!=o.readyState||200!=o.status&&0!=o.status||null!=n&&n(o.responseText)},o.open("POST",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(t)}function getHttpRequest(){var e=null;if(!window.XMLHttpRequest&&!window.ActiveXObject)return alert("Votre navigateur ne supporte pas l'objet AJAX..."),null;if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}else e=new XMLHttpRequest;return e}function currentYPosition(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}function elmYPosition(e){for(var t=document.getElementById(e),n=t.offsetTop,o=t;o.offsetParent&&o.offsetParent!=document.body;)o=o.offsetParent,n+=o.offsetTop;return n}function smoothScroll(e){var t=currentYPosition(),n=elmYPosition(e),o=n>t?n-t:t-n;if(100>o)return void scrollTo(0,n);var a=Math.round(o/100);a>=20&&(a=20);var l=Math.round(o/25),i=n>t?t+l:t-l,r=0;if(!(n>t)){for(var d=t;d>n;d-=l)setTimeout("window.scrollTo(0, "+i+")",r*a),i-=l,n>i&&(i=n),r++;return!1}for(var d=t;n>d;d+=l)setTimeout("window.scrollTo(0, "+i+")",r*a),i+=l,i>n&&(i=n),r++}function scrollToElement(e){element=document.getElementById(e);var t=document.body.getBoundingClientRect(),n=element.getBoundingClientRect(),o=n.top-t.top;window.scrollTo(0,o)}function displayNav(){currentYPosition()>document.getElementsByClassName("bloc-titre")[0].offsetTop?("block"!=document.getElementById("go-back").style.display&&(document.getElementById("go-back").style.display="block"),currentYPosition()>document.getElementById("go-back-bloc").offsetTop?("none"!=document.getElementById("go-back").style.display&&(document.getElementById("go-back").style.display="none"),"1"!=document.getElementById("go-back-bloc").style.opacity&&(document.getElementById("go-back-bloc").style.opacity="1")):("block"!=document.getElementById("go-back").style.display&&(document.getElementById("go-back").style.display="block"),"0"!=document.getElementById("go-back-bloc").style.opacity&&(document.getElementById("go-back-bloc").style.opacity="0"))):"none"!=document.getElementById("go-back").style.display&&(document.getElementById("go-back").style.display="none")}function testGoBack(){document.getElementsByClassName("go-back").length>0&&("standalone"in window.navigator&&window.navigator.standalone&&"/"!=location.pathname?window.addEventListener("scroll",function(){displayNav()},!1):(document.getElementById("go-back").style.setProperty("display","none","important"),document.getElementById("go-back-bloc").style.setProperty("display","none","important")))}function sizeBanieres(){for(var e=document.getElementsByClassName("bloc-baniere"),t=window,n=document,o=n.documentElement,a=n.getElementsByTagName("body")[0],l=(t.innerWidth||o.clientWidth||a.clientWidth,t.innerHeight||o.clientHeight||a.clientHeight),i=l/2,r=e.length-1;r>=0;r--)e[r].style.height=i+"px"}function afficherAlerte(e,t){document.getElementById(e).style.display="hide"==t?"none":"block"}function hideAllAlert(){for(var e=document.getElementsByClassName("alert"),t=e.length-1;t>=0;t--)e[t].style.display="none"}function afficherNotif(e,t){document.getElementById(e).style.display="hide"==t?"none":"block"}function hideAllNotif(){for(var e=document.getElementsByClassName("notif"),t=e.length-1;t>=0;t--)e[t].style.display="none"}function afficherChargement(e,t){document.getElementById(e).style.display="hide"==t?"none":"block"}function hideAllChargement(){for(var e=document.getElementsByClassName("chargement"),t=e.length-1;t>=0;t--)e[t].style.display="none"}function getValueMulti(e){for(var t=[],n=e.children.length-1;n>=0;n--)e.children[n].selected&&t.push(e.children[n].value);return t}function getJSONValuesForm(e){for(var t={},n=e.length-1;n>=0;n--)t[e[n].id]="SELECT"!=e[n].nodeName&&"select"!=e[n].nodeName||!e[n].multiple?"INPUT"!=e[n].nodeName&&"input"!=e[n].nodeName||"checkbox"!=e[n].type?e[n].value:e[n].checked?"1":"0":getValueMulti(e[n]);return t}function delPhoto(e){var t=file("/inc/ajax/admin/del_photo.php","chemin="+e);console.log(t),"no_image"==t?alert("No image"):"del"==t?document.getElementById(e).parentNode.innerHTML="":alert("Error : "+t)}function afficherNomPhoto(e,t){var n=JSON.parse(e);e=n.img;var o='<img src="/'+e+"?"+(new Date).getTime()+'" />';if(o+='<div class="preview-photo-options pas" id="'+e+'">',o+='<span class="txtwhite lh1">'+e+"</span>",o+='<span class="icone-cross-white right" title="Supprimer la photo" onclick="delPhoto(\''+e+"')\"></span>",o+="</div>","1"==t){document.getElementById("couverture").value="";var a=document.getElementsByClassName("preview-couverture")[0]}else{document.getElementById("image").value="";var a=document.getElementsByClassName("preview-photo-article")[n.nb_img];if(console.log(n.nb_img),2==n.nb_img){var l=document.getElementsByClassName("preview-photo-article")[document.getElementsByClassName("preview-photo-article").length-1];l.parentNode.parentNode.insertAdjacentHTML("afterend",n.new_row)}}a.innerHTML=o}function changeInputPhoto(e){if("couverture"==e)var t=uploadPhoto(e,"id_article",!0);else var t=uploadPhoto(e,"id_article",!1);"fermé"==t&&alert("L'article est fermé")}function uploadPhoto(e,t,n){var t=document.getElementById(t).value;if(""!=t){var o="0";n&&(o="1");var a=document.getElementById(e).files[0],l=getHttpRequest(),i=new FormData;return i.append(o,a),i.append("couverture",o),i.append("id_article",t),l.open("POST","/inc/ajax/admin/upload_photo.php"),l.onload=function(){afficherNomPhoto(l.responseText,o)},l.send(i),"ok"}return"fermé"}function switchDate(){if(document.getElementsByClassName("date-mois").length>0)for(var e=document.getElementsByClassName("date-mois"),t=e.length-1;t>=0;t--)e[t].addEventListener("mouseover",function(){this.nextSibling.nextElementSibling.style.display="inline",this.style.display="none"});if(document.getElementsByClassName("date-jour").length>0)for(var e=document.getElementsByClassName("date-jour"),t=e.length-1;t>=0;t--)e[t].addEventListener("mouseout",function(){this.previousSibling.previousElementSibling.style.display="inline",this.style.display="none"})}function getIdArticle(e){var t=e;return t=t.split("-"),t=t[t.length-1]}function shareEvent(){for(var e=document.getElementsByClassName("btn-share"),t=e.length-1;t>=0;t--)e[t].removeEventListener("click",function(){}),e[t].addEventListener("click",function(e){{var t=this.getAttribute("plateforme"),n=this.parentNode.parentNode.getAttribute("id");file("/inc/ajax/partage/add_partage.php","plateforme="+t+"&id_article="+n+"&timestamp="+Math.floor(Date.now()/1e3))}})}function chargerArticleIndex(){if(currentYPosition()+window.innerHeight>document.getElementsByClassName("bloc-auteur")[document.getElementsByClassName("bloc-auteur").length-1].offsetTop){var e=document.getElementsByClassName("bloc-container")[document.getElementsByClassName("bloc-container").length-1].id;if(e=getIdArticle(e),-1==nb_article_loaded.indexOf(e)){nb_article_loaded[nb_article_loaded.length]=e;var t=file("/inc/ajax/index/charger_article_index.php","id_article="+e),n=document.createElement("div");n.setAttribute("class","bloc-article"),n.innerHTML=t,document.getElementsByClassName("bloc-article")[document.getElementsByClassName("bloc-article").length-1].appendChild(n),sizeBanieres(),testGoBack(),shareEvent(),switchDate()}}}function exec_body_scripts(e){function t(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()}function n(e){var t=e.text||e.textContent||e.innerHTML||"",n=document.getElementsByTagName("head")[0]||document.documentElement,o=document.createElement("script");o.type="text/javascript";try{o.appendChild(document.createTextNode(t))}catch(a){o.text=t}n.insertBefore(o,n.firstChild),n.removeChild(o)}var o,a,l,i=[],r=e.childNodes;for(l=0;r[l];l++)a=r[l],!t(a,"script")||a.type&&"text/javascript"!==a.type.toLowerCase()||i.push(a);for(l=0;i[l];l++)o=i[l],o.parentNode&&o.parentNode.removeChild(o),n(i[l])}if(testGoBack(),"standalone"in window.navigator&&window.navigator.standalone){var noddy,remotes=!1;document.addEventListener("click",function(e){for(noddy=e.target;"A"!==noddy.nodeName&&"HTML"!==noddy.nodeName;)noddy=noddy.parentNode;if(noddy.hasAttribute("new-window")){e.preventDefault();var t=document.createElement("a");t.setAttribute("href",noddy.href),t.setAttribute("target","_blank");var n=document.createEvent("HTMLEvents");n.initEvent("click",!0,!0),t.dispatchEvent(n)}else"href"in noddy&&-1!==noddy.href.indexOf("http")&&(-1!==noddy.href.indexOf(document.location.host)||remotes)&&(e.preventDefault(),noddy.hasAttribute("btn-js")||(document.location.href=noddy.href))},!1)}document.getElementById("icone-fleche-bas").addEventListener("click",function(){smoothScroll("bloc-contenu")});var nb_article_loaded=[];window.onload=function(){WURFL.is_mobile&&"standalone"in window.navigator&&!window.navigator.standalone||window.addEventListener("resize",function(){sizeBanieres()}),window.addEventListener("orientationchange",function(){sizeBanieres()}),sizeBanieres(),scrollToElement("bloc-contenu"),document.getElementById("bloc-body").style.opacity="1",document.getElementById("bloc-chargement-general").style.opacity="0",switchDate(),shareEvent(),"/"==location.pathname&&window.addEventListener("scroll",function(){chargerArticleIndex()},!1)};